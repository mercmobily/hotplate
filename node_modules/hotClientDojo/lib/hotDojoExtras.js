"use strict";

var dummy
  , hotplate =  require('hotplate')
  , path = require('path')
;

// Some sane defaults
hotplate.config.set( 'hotDojoExtras.dgrid-theme', 'claro' );

hotplate.hotEvents.on( 'enrichDojoConf', 'hotDojoExtras',  function( conf, done ){

  var p = path.join( hotplate.config.get( 'hotplate.moduleFilesPrefix' ), 'hotDojoExtras' );

  conf.packages.push( { name: 'dgrid', location: path.join( p, 'dgrid') } );
  conf.packages.push( { name: 'put-selector', location: path.join( p, 'put-selector') } );
  conf.packages.push( { name: 'xstyle', location: path.join( p, 'xstyle' ) } );
  conf.packages.push( { name: 'dstore', location: path.join( p, 'dstore' ) } );

  done( null );
});


hotplate.hotEvents.on( 'pageElements', 'hotDojoExtras', hotplate.cachable( function( done ){

  //var theme;
  //if( ! ( theme = hotplate.config.get('hotDojoExtras.dgrid-theme' ) ) ) theme = 'claro';
  var theme = hotplate.config.get('hotDojoExtras.dgrid-theme' );

  done( null, {
    csses: ['dgrid/css/skins/' + theme + '.css' ],
  });

}));

// Simply activate path to client files
hotplate.hotEvents.on( 'clientPath', 'hotDojoExtras', function( done ){
  done( null, path.join(__dirname, '../client') );
})
    

